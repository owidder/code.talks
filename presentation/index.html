<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>D3 in 15 minutes</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <style>
        svg {
            background: white;
        }

        mark.my {
            border-color: white;
            font-weight: bolder;
            background: white;
        }

        circle {
            fill: white;
            stroke: black;
            stroke-width: 2px;
            opacity: .5;
        }

        pre.new {
            background-color: lightgoldenrodyellow;
        }
    </style>

    <link rel="stylesheet" type="text/css" href="../node_modules/materialize-css/dist/css/materialize.css"
          media="screen,projection"/>
    <link rel="stylesheet" type="text/css" href="../css/material-icons.css"/>

    <script src="../node_modules/d3/build/d3.js"></script>

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>
<body>
<div class="reveal">
    <div class="slides">

<!--
        Adding data to DOM elements
-->

        <section class="title" data-transition="zoom">
            Adding data to DOM elements
        </section>

        <section>
            <pre><code>
            <svg id="svg01" height="600" width="1000">
                <circle cx="500" cy="300" r="10"></circle>
                <circle cx="500" cy="300" r="10"></circle>
                <circle cx="500" cy="300" r="10"></circle>
            </svg>
            </code></pre>
            <pre>
                <code data-trim data-noescape>

    const selection = d3.selectAll("circle")
        .data([
            {name:"a", x:100, y:100, r:20, color:"blue"},
            {name:"b", x:100, y:400, r:30, color:"orange"},
            {name:"c", x:600, y:400, r:40, color:"red"}
        ]);

    console.log(document.querySelectorAll("circle"))
                </code>
            </pre>
        </section>
        <section>
            <a onclick="step1()" class="btn-floating btn-large waves-effect waves-light cyan"><i
                    class="material-icons">play_arrow</i></a>
            <svg id="svg01" height="600" width="1000">
                <circle cx="500" cy="300" r="10"></circle>
                <circle cx="500" cy="300" r="10"></circle>
                <circle cx="500" cy="300" r="10"></circle>
            </svg>
            <script>
                function step1() {
                    var svg = d3.select("#svg01");
                    const selection = svg.selectAll("circle")
                        .data([
                            {name: "a", x: 100, y: 100, r: 20, color: "blue"},
                            {name: "b", x: 100, y: 400, r: 30, color: "orange"},
                            {name: "c", x: 600, y: 400, r: 40, color: "red"}
                        ]);

                    console.log(document.querySelectorAll("#svg01 circle"));
                }
            </script>
        </section>

<!--
        Using the data to manipulate the DOM<br>
        AKA "Update"
-->

        <section class="title" data-transition="zoom">
            Using the data to manipulate the DOM<br>
            AKA "Update"
        </section>

        <section>
            <pre>
                <code data-trim data-noescape>
    const selection = d3.selectAll("circle")
        .data([
            {name: "a", x: 100, y: 100, r: 20, color: "blue"},
            {name: "b", x: 100, y: 400, r: 30, color: "orange"},
            {name: "c", x: 600, y: 400, r: 40, color: "red"}
        ]);
                </code>
            </pre>

            <pre class="new">
                <code data-trim data-noescape>
    selection
        .attr("cx", function (d) {
            return d.x;
        })
        .attr("cy", function (d) {
            return d.y;
        })
        .attr("r", function (d) {
            return d.r;
        })
        .style("fill", function (d) {
            return d.color;
        })
                </code>
            </pre>
        </section>
        <section>
            <a onclick="step2()" class="btn-floating btn-large waves-effect waves-light cyan"><i
                    class="material-icons">play_arrow</i></a>
            <svg id="svg02" height="600" width="1000">
                <circle cx="500" cy="300" r="10"></circle>
                <circle cx="500" cy="300" r="10"></circle>
                <circle cx="500" cy="300" r="10"></circle>
            </svg>

            <script>
                function step2() {
                    var svg = d3.select("#svg02");
                    const selection = svg.selectAll("circle")
                        .data([
                            {name: "a", x: 100, y: 100, r: 20, color: "blue"},
                            {name: "b", x: 100, y: 400, r: 30, color: "orange"},
                            {name: "c", x: 600, y: 400, r: 40, color: "red"}
                        ]);

                    selection
                        .attr("cx", function (d) {
                            return d.x;
                        })
                        .attr("cy", function (d) {
                            return d.y;
                        })
                        .attr("r", function (d) {
                            return d.r;
                        })
                        .style("fill", function (d) {
                            return d.color;
                        })
                }
            </script>
        </section>

        <!--
                Transitions
        -->

        <section class="title" data-transition="zoom">
            Transitions
        </section>

        <section>
            <pre class="stretch">
                <code data-trim data-noescape>
    const selection = d3.selectAll("circle")
        .data([
            {name:"a", x:100, y:100, r:20, color:"blue"},
            {name:"b", x:100, y:400, r:30, color:"orange"},
            {name:"c", x:600, y:400, r:40, color:"red"}
        ]);

    selection
        <mark class="my">.transition()</mark>
        <mark class="my">.duration(5000)</mark>
        .attr("cx", function (d) {
            return d.x;
        })
        .attr("cy", function (d) {
            return d.y;
        })
        .attr("r", function (d) {
            return d.r;
        })
        .style("fill", function (d) {
            return d.color;
        })
                </code>
            </pre>
        </section>

        <section>
            <a onclick="step3()" class="btn-floating btn-large waves-effect waves-light cyan"><i
                    class="material-icons">play_arrow</i></a>
            <svg id="svg03" height="600" width="1000">
                <circle cx="500" cy="300" r="10"></circle>
                <circle cx="500" cy="300" r="10"></circle>
                <circle cx="500" cy="300" r="10"></circle>
            </svg>

            <script>
                function step3() {
                    var svg = d3.select("#svg03");
                    const selection = svg.selectAll("circle")
                        .data([
                            {name: "a", x: 100, y: 100, r: 20, color: "blue"},
                            {name: "b", x: 100, y: 400, r: 30, color: "orange"},
                            {name: "c", x: 600, y: 400, r: 40, color: "red"}
                        ]);

                    selection
                        .transition()
                        .duration(5000)
                        .attr("cx", function (d) {
                            return d.x;
                        })
                        .attr("cy", function (d) {
                            return d.y;
                        })
                        .attr("r", function (d) {
                            return d.r;
                        })
                        .style("fill", function (d) {
                            return d.color;
                        })
                }
            </script>
        </section>

        <!--
        Change the data
        -->

        <section class="title" data-transition="zoom">
            Change the data
        </section>

        <section>
            <pre class="stretch">
                <code data-trim data-noescape>
    const selection = d3.selectAll("circle")
        .data([
            {name:"a", x:100, y:100, r:20, color:"blue"},
            {name:"b", x:100, y:400, r:30, color:"orange"},
            {name:"c", x:600, y:400, r:40, color:"red"}
        ]);

    selection
        .transition()
        .duration(5000)
        .attr("cx", function (d) {
            return d.x;
        })
        .attr("cy", function (d) {
            return d.y;
        })
        .attr("r", function (d) {
            return d.r;
        })
        .style("fill", function (d) {
            return d.color;
        })

    setTimeout(function () {
        const selection = d3.selectAll("circle")
            .data([
                {name:"c", x:100, y:100, r:80, color:"grey"},
                {name:"a", x:100, y:400, r:10, color:"yellow"},
                {name:"b", x:600, y:400, r:60, color:"cyan"}
            ], function (d) {
                return d.name;
            });

        selection
            .transition()
            .duration(5000)
            .attr("cx", function (d) {
                return d.x;
            })
            .attr("cy", function (d) {
                return d.y;
            })
            .attr("r", function (d) {
                return d.r;
            })
            .style("fill", function (d) {
                return d.color;
            })

    }, 8000);
                </code>
            </pre>
        </section>

        <section>
            <a onclick="step4()" class="btn-floating btn-large waves-effect waves-light cyan"><i
                    class="material-icons">play_arrow</i></a>
            <svg id="svg04" height="600" width="1000">
                <circle cx="500" cy="300" r="10"></circle>
                <circle cx="500" cy="300" r="10"></circle>
                <circle cx="500" cy="300" r="10"></circle>
            </svg>

            <script>
                function step4() {
                    var svg = d3.select("#svg04");
                    const selection = svg.selectAll("circle")
                        .data([
                            {name:"a", x:100, y:100, r:20, color:"blue"},
                            {name:"b", x:100, y:400, r:30, color:"orange"},
                            {name:"c", x:600, y:400, r:40, color:"red"}
                        ]);

                    selection
                        .transition()
                        .duration(5000)
                        .attr("cx", function (d) {
                            return d.x;
                        })
                        .attr("cy", function (d) {
                            return d.y;
                        })
                        .attr("r", function (d) {
                            return d.r;
                        })
                        .style("fill", function (d) {
                            return d.color;
                        })

                    setTimeout(function () {
                        const selection = svg.selectAll("circle")
                            .data([
                                {name:"c", x:100, y:100, r:80, color:"grey"},
                                {name:"a", x:100, y:400, r:10, color:"yellow"},
                                {name:"b", x:400, y:400, r:60, color:"cyan"}
                            ], function (d) {
                                return d.name;
                            });

                        selection
                            .transition()
                            .duration(5000)
                            .attr("cx", function (d) {
                                return d.x;
                            })
                            .attr("cy", function (d) {
                                return d.y;
                            })
                            .attr("r", function (d) {
                                return d.r;
                            })
                            .style("fill", function (d) {
                                return d.color;
                            })

                    }, 8000);
                }
            </script>
        </section>

        <!--
        Append new elements<br>
        AKA "Enter"
        -->

        <section class="title" data-transition="zoom">
            Append new elements<br>
            AKA "Enter"
        </section>

        <section>
            <pre class="stretch">
                <code data-trim data-noescape>
    const selection = d3.selectAll("circle")
        .data([
            {name:"a", x:100, y:100, r:20, color:"blue"},
            {name:"b", x:100, y:400, r:30, color:"orange"},
            {name:"c", x:600, y:400, r:40, color:"red"}
        ]);

    selection
        .transition()
        .duration(5000)
        .attr("cx", function (d) {
            return d.x;
        })
        .attr("cy", function (d) {
            return d.y;
        })
        .attr("r", function (d) {
            return d.r;
        })
        .style("fill", function (d) {
            return d.color;
        })

    setTimeout(function () {
        const selection = d3.selectAll("circle")
            .data([
                {name:"c", x:100, y:100, r:80, color:"grey"},
                {name:"a", x:100, y:400, r:10, color:"yellow"},
                <mark class="my">{name:"d", x:600, y:100, r:100, color:"green"},</mark>
                {name:"b", x:600, y:400, r:60, color:"cyan"}
            ], function (d) {
                return d.name;
            });

        selection
            .transition()
            .duration(5000)
            .attr("cx", function (d) {
                return d.x;
            })
            .attr("cy", function (d) {
                return d.y;
            })
            .attr("r", function (d) {
                return d.r;
            })
            .style("fill", function (d) {
                return d.color;
            })

    }, 8000);
                </code>
            </pre>
        </section>

        <section>
            <a onclick="step4()" class="btn-floating btn-large waves-effect waves-light cyan"><i
                    class="material-icons">play_arrow</i></a>
            <svg id="svg04" height="600" width="1000">
                <circle cx="500" cy="300" r="10"></circle>
                <circle cx="500" cy="300" r="10"></circle>
                <circle cx="500" cy="300" r="10"></circle>
            </svg>

            <script>
                function step4() {
                    var svg = d3.select("#svg04");
                    const selection = svg.selectAll("circle")
                        .data([
                            {name:"a", x:100, y:100, r:20, color:"blue"},
                            {name:"b", x:100, y:400, r:30, color:"orange"},
                            {name:"c", x:600, y:400, r:40, color:"red"}
                        ]);

                    selection
                        .transition()
                        .duration(5000)
                        .attr("cx", function (d) {
                            return d.x;
                        })
                        .attr("cy", function (d) {
                            return d.y;
                        })
                        .attr("r", function (d) {
                            return d.r;
                        })
                        .style("fill", function (d) {
                            return d.color;
                        })

                    setTimeout(function () {
                        const selection = svg.selectAll("circle")
                            .data([
                                {name:"c", x:100, y:100, r:80, color:"grey"},
                                {name:"a", x:100, y:400, r:10, color:"yellow"},
                                {name:"b", x:400, y:400, r:60, color:"cyan"}
                            ], function (d) {
                                return d.name;
                            });

                        selection
                            .transition()
                            .duration(5000)
                            .attr("cx", function (d) {
                                return d.x;
                            })
                            .attr("cy", function (d) {
                                return d.y;
                            })
                            .attr("r", function (d) {
                                return d.r;
                            })
                            .style("fill", function (d) {
                                return d.color;
                            })

                    }, 8000);
                }
            </script>
        </section>


    </div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>
    // More info about config & dependencies:
    // - https://github.com/hakimel/reveal.js#configuration
    // - https://github.com/hakimel/reveal.js#dependencies
    Reveal.initialize({
        width: window.innerWidth,
        height: window.innerHeight,
        margin: 0,
        transition: 'slide', // default/cube/page/concave/zoom/linear/fade/none
        dependencies: [
            {src: 'plugin/markdown/marked.js'},
            {src: 'plugin/markdown/markdown.js'},
            {src: 'plugin/notes/notes.js', async: true},
            {
                src: 'plugin/highlight/highlight.js', async: true, callback: function () {
                hljs.initHighlightingOnLoad();
            }
            }
        ]
    });
</script>
</body>
</html>
